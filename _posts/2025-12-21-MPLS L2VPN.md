---
title: "L2VPN - PW, PWE3, VWPS, VLL, VPLS有什么区别？"
date: 2025-12-21
categories: Network
math: true
---



一句话总结：

- PW是一种模拟隧道，用于打通两个网络。
- PWE3基于PW的一种模型。
- VWPS(等于VLL)和VPLS是PWE3模型下面基于MPLS隧道的2种Ethernet PW技术。

---

早期的网络，有很多类型的业务(voice, video, file-transfer, BE data, web browsing, etc.)，运营商根据业务的类型来建网并且销售（所以我们可以看到以前有很多不同的技术，比如IPv4，E1，Fiber Channel等），但是这样的网络效率比较低单bit可以转发的业务流量低），所以现在的运营商网络都是融合网络（FMC - Fixed, Mobile, Converge）

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-a3760f219883dcce67978c85aeac0250_1440w.jpg)



因为早期有不同类型的网络，跑不同的协议，所以当时不同网络互通是个常见的需求，称为“Interworking”

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-3234f8b2930b5280f0c128f4d55f944f_1440w.jpg)



一种连接不同网络的方法是中间设备做终结，然后去往另一张网络的时候发送另一张网络的协议，这种方法叫“Service Interworking”

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-6eed1fe328b4275067c6ec2ff02a2ee6_1440w.jpg)



另一种方法称为“Network interworking”或者叫“Tunneling”，用在两边网络都跑同一种协议的场景。

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-e361fac2ce70c826e26998cc48332448_1440w.jpg)



“Tunneling”的方法，对于两边网络来说，中间像是被“模拟”（“Emulation”）成了透明的一条“线”（“wire”）

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-43afe2eccd669fa9f479109fa7ce6f84_1440w.jpg)



端到端的模拟

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-172a204667c404ec880fb7cc99729d65_1440w.jpg)



> In computer networking and telecommunications, a pseudowire (PW) is an emulation of a native service over a packet-switched network (PSN). The native service may be ATM, Frame Relay, Ethernet, low-rate TDM, or SONET/SDH, while the PSN may be MPLS, IP (either IPv4 or IPv6), or L2TPv3. - Wiki
> The pseudowire is a logical point-to-point MPLS connection between two service routers participating in the same service. - <Designing and Implementing IP MPLS-Based Ethernet Layer 2 VPN Services>

伪(Pseudo)线(Wire) -- 很形象的名字

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-fdf4683a675c4cabf4d1f550e91e26df_1440w.jpg)



运营商网络PE和P角色的概念

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-f6eb977d499cd6f88f8c4c9aaae02346_1440w.jpg)



VPN的概念

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-3f80128f84f22af42dc86e1d7fb67592_1440w.jpg)



PWE3的概念，PWE3准确的说是一种模型

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-ca43b44e7e881cb2695e165b387ef03f_1440w.jpg)



![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-daa709ced25a9e25d8f03c08b5f3121f_1440w.jpg)



![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-118d3136f8ebb38a8f35778607bbecf0_1440w.jpg)



PWE3的一些原则

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-9aab2ea4b1ae480d165407d8ca2db067_1440w.jpg)



IETF PWE3工作组聚焦研究MPLS技术的PW（所以现在看到的L2VPN技术都是IETF定义出来的）。这里也分析了为什么最终选择了MPLS作为PW的主流技术，而不是IP。

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-fad1cb39efa29de0f5c4bd32252e75e3_1440w.jpg)



MPLS方案

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-61e1a891f92acf54208a7a6c7e3f942f_1440w.jpg)



Martini PW，最早的标准之一

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-abcb31fcb44999489302a90e30cc7101_1440w.jpg)



![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-3836c53626af69ed8a2bb0be1751d496_1440w.jpg)



PW报文

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-d58c464e9fa27ba614eda3c1314e4800_1440w.jpg)



![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-f7495c635dd1080bc092080c3738f4ea_1440w.jpg)



![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-e746571ba95692ff5d7386d3621d5dd1_1440w.jpg)



PW交换，负载分担和保护

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-8a7d96c30075921c51c0ca7111ba37bd_1440w.jpg)



![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-34207bcd2c22a60b9197e8b2a9c54ae0_1440w.jpg)



![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-0c0a5b5cdef3554bafbd6cf3b46d76f4_1440w.jpg)



传统LAN和LAN之间互通，需要经过WAN

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-9bfaa1f81b3eb7aded397d3e1fb643d0_1440w.jpg)



不同的LAN用户希望互通，像是在一个大LAN里面

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-e95789445431148b2e076fd24bc5dec8_1440w.jpg)



Ethernet PWs已经成为主流

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-8e375d14775c3dbd27682656425d37a0_1440w.jpg)



![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-1d754793380c6c36d88830beda081f23_1440w.jpg)



Ethernet PWs诞生，分为：VPWS和VPLS

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-28609c4819719f7c8c27d37d0935a51a_1440w.jpg)



![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-a6c9f0a7431f23f894f8cc54022bd778_1440w.jpg)



The VLL is completely transparent to the end-user data and application protocol. From the customer’s perspective, the service provider’s network that provides the VLL service acts like a **wire (hence the term pseudowire)** and connects the two sites. Therefore, **VLL is also referred to as Virtual Private Wire Service (VPWS)**. The VLL service accepts native format traffic from one customer site and sends it to the other customer site.

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-faa5b970b4081b49d618787a02de0350_1440w.jpg)



Virtual Private LAN Service (VPLS) is a way to provide Ethernet-based multipoint to multipoint communication over IP or MPLS networks.

![img](https://raw.githubusercontent.com/LiuMaoDou/Files/main/Pics/v2-9706dfd62318c38cfa713ce001e05991_1440w.jpg)
